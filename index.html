<!DOCTYPE html>
<html lang="km">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Order Food & Drink</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 20px;
      padding: 0;
      background-color: #f8f8f8;
    }
    h1, h2 {
      color: #333;
    }
    .menu-item {
      background: white;
      border: 1px solid #ddd;
      padding: 10px;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .menu-item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      margin-right: 10px;
    }
    .menu-item span {
      flex-grow: 1;
    }
    .menu-item input {
      width: 50px;
      margin-right: 10px;
    }
    button {
      background: #007aff;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #005bb5;
    }
    #qr-section {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>📋 មែនុម្ហូប</h1>

  <div class="menu">
    <div class="menu-item">
      <img src="coffee.jpg" alt="Coffee">
      <span>☕ Coffee - $4</span>
      <input type="number" id="qty-coffee" min="1" value="1">
      <button onclick="addToCart('Coffee', 4, 'qty-coffee')">បន្ថែម</button>
    </div>
    <div class="menu-item">
      <img src="burger.jpg" alt="Burger">
      <span>🍔 Burger - $5</span>
      <input type="number" id="qty-burger" min="1" value="1">
      <button onclick="addToCart('Burger', 5, 'qty-burger')">បន្ថែម</button>
    </div>
    <div class="menu-item">
      <img src="fries.jpg" alt="Fries">
      <span>🍟 Fries - $3</span>
      <input type="number" id="qty-fries" min="1" value="1">
      <button onclick="addToCart('Fries', 3, 'qty-fries')">បន្ថែម</button>
    </div>
    <div class="menu-item">
      <img src="coke.jpg" alt="Coke">
      <span>🥤 Coke - $2</span>
      <input type="number" id="qty-coke" min="1" value="1">
      <button onclick="addToCart('Coke', 2, 'qty-coke')">បន្ថែម</button>
    </div>
  </div>

  <h2>🛒 កម្មង់របស់អ្នក</h2>
  <ul id="cart-list"></ul>
  <p id="total">សរុប: $0</p>
  <button onclick="submitOrder()">📤 បញ្ជូនកម្មង់</button>

  <h2>💵 បង់ប្រាក់តាម ABA</h2>
  <button id="payBtn" onclick="showQR()">បង្ហាញ ABA QR</button>
  <div id="qr-section" style="display:none;">
    <p>ស្កេនកូដខាងក្រោមដើម្បីបង់ប្រាក់:</p>
    <img src="photo_2024-09-13_14-29-17.jpg" alt="ABA QR Code" width="250">
    <p><strong>ឈ្មោះគណនី:</strong> LAING RATHANA</p>
  </div>

  <script>
    let cart = [];
    let total = 0;

    function addToCart(item, price, qtyInputId) {
      const qty = parseInt(document.getElementById(qtyInputId).value);
      if (qty > 0) {
        cart.push({ item, price, qty });
        total += price * qty;
        renderCart();
        sendTelegramMessage(item, qty, price);
      }
    }

    function renderCart() {
      const list = document.getElementById('cart-list');
      list.innerHTML = '';
      cart.forEach(entry => {
        const li = document.createElement('li');
        li.innerText = `${entry.item} x${entry.qty} - $${entry.price * entry.qty}`;
        list.appendChild(li);
      });
      document.getElementById('total').innerText = `សរុប: $${total}`;
    }

    function submitOrder() {
      if (cart.length === 0) {
        alert('សូមជ្រើសរើសម្ហូបមុនបញ្ជូនកម្មង់។');
        return;
      }
      let summary = '📦 កម្មង់ថ្មី៖\n';
      cart.forEach(entry => {
        summary += `- ${entry.item} x${entry.qty} = $${entry.price * entry.qty}\n`;
      });
      summary += `\n💰 សរុប: $${total}`;
      const token = 'YOUR_BOT_TOKEN';
      const chat_id = '@SithEmoji';
      const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat_id}&text=${encodeURIComponent(summary)}`;
      fetch(url).then(() => alert('📬 កម្មង់ត្រូវបានបញ្ជូនទៅ Telegram')).catch(() => alert('❌ បរាជ័យក្នុងការបញ្ជូន'));
    }

    function showQR() {
      document.getElementById('qr-section').style.display = 'block';
    }

    function sendTelegramMessage(item, qty, price) {
      const message = `មានកម្មង់ថ្មី៖ ${item} x${qty} = $${price * qty}`;
      const token = 'YOUR_BOT_TOKEN';
      const chat_id = 'YOUR_CHAT_ID';
      const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat_id}&text=${encodeURIComponent(message)}`;
      fetch(url);
    }
  </script>
</body>
</html>
